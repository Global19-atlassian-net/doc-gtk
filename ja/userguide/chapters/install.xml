<?xml version="1.0" encoding="UTF-8" ?>
 <chapter id="installation">
  <title>インストール</title>
  <sect1 id="install.get">
   <title>最新版の入手</title>
   <para>
    Windows用のPHP-GTK &version.phpgtk;ソースおよびバイナリは、
    <ulink url="&url.phpgtk;">&url.phpgtk;</ulink>から入手可能です。
    ソースを使用する人は、PHPの最新版もCVS
    <ulink url="&url.php.anoncvs;">&url.php.anoncvs;</ulink>からインス
    トールする必要があります。
   </para>
  </sect1>
  
  <sect1 id="install.win32">
   <title>Windows環境でPHP-GTKをインストールする</title>
   
   <sect2 id="install.win32.binaries">
    <title>PHP-GTKをダウンロードする</title>
    <para>
     PHP-GTK &version.phpgtk; win32バイナリを
     <ulink url="&url.phpgtk;">&url.phpgtk;</ulink>からダウンロードして
     下さい。php.netのCVSサーバから最新のソースを確認してもよいかもしれ
     ません。詳細は、
     <ulink url="&url.php.anoncvs;">&url.php.anoncvs;</ulink>も参照して
     下さい。
    </para>
   </sect2>
   <sect2 id="install.win32.binary.package-layout">
    <title>バイナリ配布ファイルの配置</title>
    <para>
     PHP-GTKのバイナリ配布版には、以下の構造が含まれています。
     <itemizedlist>
      <listitem>
       <simpara>
	<filename>\php4</filename> -&gt; PHP devおよびPHP-GTK 
	&version.phpgtk;バイナリファイル
       </simpara>
      </listitem>
      <listitem>
       <simpara>
	<filename>\winnt</filename> -&gt; デフォルトphp.iniファイル
       </simpara>
      </listitem>
      <listitem>
       <simpara>
       <filename>\winnt\system32</filename> -&gt; 拡張モジュールにより
       使用されるGTK+バイナリ
       </simpara>
      </listitem>
      <listitem>
       <simpara>
       <filename>\test</filename> -&gt; PHP-GTKの使用方法をデモするた
       めの小数のサンプル集
       </simpara>
      </listitem>
      <listitem>
       <simpara>
       <filename>README.TXT</filename>
       </simpara>
      </listitem>
     </itemizedlist>
    </para>
   </sect2>
   <sect2 id="install.win32.howto">
    <title>インストール方法</title>
    <orderedlist>
     <listitem>
      <simpara>
       新規にインストールする際には、<filename>C:\php4</filename>を作
       成し、このディレクトリへ<filename>\php4</filename>の下のファイ
       ルをコピーします。
       既存のPHPインストール(例えば、Apache用の)または他にインストール
       したい場合、<filename>php.ini</filename>ファイルもここに置く必
       要があります。デフォルトでこのフォルダの中にあるファイルは、PHP
       またはPHP-GTKに関連するもので、常に更新する必要があるものはこれ
       だけです。<filename>C:\php4</filename>はデフォルトのディレクト
       リで、PHP-GTKを他の場所にインストールした場合、PHPにより使用さ
       れる<filename>php.ini</filename>のコピーのextension_dirに
       そのフルパスを指定する必要があります。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       system32ディレクトリに<filename>\winnt\system32</filename>の内
       容をコピーする必要があります。Windows NTおよびWindows 2000の場
       合、これは<filename>C:\winnt\system32</filename>となります。
       Windows 95/98の場合は、<filename>C:\Windows\system</filename>ま
       たは<filename>C:\Windows\system32</filename>となります。
       このファイルのグループはGTKに関連し、PHP-GTK2がリリースされるま
       で更新する必要はありません。
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       <filename>\test</filename>の中身をスクリプトを実行したい場所(例
       えば、<filename>C:\php4\test</filename>).にコピーして下さい。
      </simpara>
     </listitem>
    </orderedlist>
   </sect2>

   <sect2 id="install.win32.usage">
    <title>PHP-GTKの使用法</title>
    <simpara>
     PHP-GTKはコマンドラインから(またはバッチファイルから)以下の構文に
     より開始することができます。
     <command>C:\php4\php -q C:\path\to\php-gtk\script.php</command>
    </simpara>
   </sect2>
  </sect1>
  
  <sect1 id="install.unix">
   <title>UNIX環境でPHP-GTKをインストールする</title>
   <para>
    Debianユーザは、PHP-GTKバイナリを
    <ulink url="&url.debian;">&url.debian;</ulink>からダウンロードでき
    ます。
   </para>
   <para>
    PHP GTKは多くのパッケージに依存しています。これらは、PHP-GTKをイン
    ストールする前にインストールしておく必要があります。
    <itemizedlist>
     <listitem>
      <para>
       PHPバージョン&version.php;以降
      </para>
     </listitem>
     <listitem>
      <para>
       GTK+ライブラリ。これは、
       <ulink url="&url.gtk.download;">&url.gtk.download;</ulink>で入
       手可能です。または、使用するシステム用のパッケージされたバージョ
       ン、例えば、<literal>gtk</literal>および<literal>gtk-devel</literal>
       を使用することもできます。
      </para>
     </listitem>
     <listitem>
      <simpara>
       libtool, automakeとautoconf。 libtool 1.4.2, automake 1.4と
       autoconf 2.13の組み合わせは動作することが知られています。
       他のバージョンの組み合わせについては状況が異なる可能性がありま
       す。
      </simpara>
     </listitem>
     <listitem>
      <para>
       オプションのその他の要素については、
       <ulink url="&url.gtkhtml;">GtkHTMLライブラリ</ulink>,
       <ulink url="&url.scintilla;">GtkScintillaライブラリ</ulink>,
       <ulink url="&url.pixbuf;">Gdk-Pixbufライブラリ</ulink>をダウン
       ロードして下さい。前と同様に、これらは使用するシステム用にパッ
       ケージされている可能性がありますので、開発版をイsヌとーるする前
       に確認して下さい。GtkHTMLは、更に<literal>GAL</literal>のような
       ものに依存しており、これは、
       <ulink url="&url.gnome.ftp;">Gnome ftpサイト</ulink>からダウン
       ロードできます。
      </para>
     </listitem>
    </itemizedlist>
   </para>
   <para>
    最新のソースを
    <ulink url="&url.phpgtk;">&url.phpgtk;</ulink>または
    anonymous CVS 
    <ulink url="&url.php.anoncvs;">&url.php.anoncvs;</ulink>から入手す
    ることをお薦めします。
   </para>
   <para>
    Run the <command>./buildconf</command> script that is inside the 
    distribution.  This will set up the necessary files and create the
    <literal>configure</literal> script.  Next, run 
    <command>./configure</command>.  This will check that you have a correct
    version of GTK+ 1.2.x (1.2.6 or above, available from 
    <ulink url="&url.gtk.download;">&url.gtk.download;</ulink>) and other files
    required for compilation, and will then create the needed Makefiles.
   </para>
   <simpara>
    <command>./configure</command> can also be used to build the extra 
    widgets, e.g.
    <command>./configure --enable-scintilla --enable-gtkhtml</command>.  To
    list all the available options use <command>./configure --help</command>.  
    Remember that each extra widget may have a number of dependencies
    that need to be available for the build to be successful.
   </simpara>
   <simpara>
    Finally, run <command>make</command> to compile the extension.  Some
    source files are generated from .defs files by the code generator.  If
    you see messages like <literal>&quot;Could not write...&quot;</literal>, 
    it means that the listed GTK+ objects or features are not yet supported. 
    If the compilation is successful, run <command>make install</command> to
    install the extension into your default PHP extension directory (usually 
    <filename>/usr/local/lib/php/extensions</filename>).
   </simpara>
   <para>
    Troubleshooting: common problems from <command>./configure</command> or 
    <command>make</command>
    <itemizedlist>
     <listitem>
      <simpara>
       <literal>./ltconfig: ltconfig : No such file or directory, configure: 
	error: libtool configure failed</literal>  is caused by not having
       one of libtool, automake or autoconf installed.
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       <literal>./aclocal.m4:813: error: m4_defn: undefined: 
	_m4_divert_diversion</literal>  is caused by an incompatible version
       of autoconf, see the recommended  versions above.
      </simpara>
     </listitem>
     <listitem>
      <para>
       <literal>php_gtk+.c:33: parse error before `TSRMLS_DC'</literal>  is
       caused by either an old version of php being found by the build system
       or trying to build php-gtk with an old version of PHP - please upgrade
       to PHP version &version.php; to fix this.
      </para>
     </listitem>
     <listitem>
      <simpara>
       <literal>gen_gtk.c:1: parse error before '&lt;'</literal>  is caused by
       an error occurring in the generator.  Usually this error is resolved by
       adding the line 
       <literal>ini_set(&quot;memory_limit&quot;, &quot;32M&quot;);</literal> 
       to the first line of <filename>generator/generator.php</filename>.  You
       will need to remove all the <filename>gen_*</filename> files from all
       directories after changing this.
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       <literal>checking for gnome-config... Unknown library `gtkhtml'</literal>
       (from <command>./configure</command>)  is due to an old or unavailable
       development header file - if you installed by rpm or a similar package
       system you will need the <literal>-devel</literal> packages
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       <literal>Unable to find -lgal</literal>  or similar message is caused
       by a missing <literal>gal-devel</literal> or similar library.  Usually
       this will be a sub dependancy of some of the more complex widgets, like
       gtkhtml.
      </simpara>
     </listitem>
    </itemizedlist>
   </para>
   <simpara>
    To test the extension, try running the example scripts in the 
    <filename>test/</filename> directory.  These also provide demonstrations
    of some of the ways in which PHP-GTK and its extensions can be used.
   </simpara>
  </sect1>
 </chapter>
 
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
