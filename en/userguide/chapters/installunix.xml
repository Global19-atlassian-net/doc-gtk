<?xml version="1.0" encoding="ISO-8859-1" ?>
<!-- $Revision: 1.5 $ -->
<chapter id="installunix">
 <title>Installing PHP-GTK Under Unix</title>
 <para>
  Debian users can now download a PHP-GTK binary from 
  <ulink url="&url.debian;">&url.debian;</ulink>.
 </para>
 <para>
  PHP GTK depends on a number of packages, which need to be installed before
  starting the PHP-GTK installation:
  <itemizedlist>
   <listitem>
    <para>
     PHP version &version.php; or later
    </para>
   </listitem>
   <listitem>
    <para>
     The GTK+ libraries, available from 
     <ulink url="&url.gtk.download;">&url.gtk.download;</ulink>, or you can
     use the packaged versions for your system, e.g. <literal>gtk</literal> 
     and <literal>gtk-devel</literal>
    </para>
   </listitem>
   <listitem>
    <simpara>
     libtool, automake and autoconf.  The combination of libtool 1.4.2, 
     automake 1.4 and autoconf 2.13 is known to work; mileage may vary
     with other version combinations.
    </simpara>
   </listitem>
   <listitem>
    <para>
     For the optional extras, download 
     <ulink url="&url.gtkhtml;">GtkHTML libraries</ulink>,
     <ulink url="&url.scintilla;">GtkScintilla libraries</ulink> and
     <ulink url="&url.pixbuf;">Gdk-Pixbuf libraries</ulink>.  Again, these
     may be available packaged on your system, just ensure that you also
     install the development package.  GtkHTML, notably, has a number of
     sub-dependencies, e.g. <literal>GAL</literal>, that can also be
     obtained from the <ulink url="&url.gnome.ftp;">Gnome ftp site</ulink>.
    </para>
   </listitem>
  </itemizedlist>
 </para>
 <para>
  We suggest you get the latest source from 
  <ulink url="&url.phpgtk;">&url.phpgtk;</ulink> or from anonymous CVS 
  <ulink url="&url.php.anoncvs;">&url.php.anoncvs;</ulink>.
 </para>
 <note>
  <para>
   The <ulink url="&url.wiki;">wiki</ulink> contains an 
   <ulink url="&url.wiki.installhowto;">installation howto</ulink> with 
   screenshots describing how to install PHP-Gtk from CVS verbosely.
  </para>
 </note>
 <para>
  Run the <command>./buildconf</command> script that is inside the 
  distribution.  This will set up the necessary files and create the
  <filename>configure</filename> file.  Next, run 
  <command>./configure</command>.  This will check that you have a correct
  version of GTK+ 1.2.x (1.2.6 or above, available from 
  <ulink url="&url.gtk.download;">&url.gtk.download;</ulink>) and other files
  required for compilation, and will then create the needed Makefiles.
 </para>
 <simpara>
  <command>./configure</command> can also be used to build the extra 
  widgets, e.g.
  <command>./configure --enable-scintilla --enable-gtkhtml</command>.  To
  list all the available options use <command>./configure --help</command>.  
  Remember that each extra widget may have a number of dependencies
  that need to be available for the build to be successful.
 </simpara>
 <simpara>
  Finally, run <command>make</command> to compile the extension.  Some
  source files are generated from .defs files by the code generator.  If
  you see messages like <literal>"Could not write..."</literal>, 
  it means that the listed GTK+ objects or features are not yet supported. 
  If the compilation is successful, run <command>make install</command> to
  install the extension into your default PHP extension directory (usually 
  <filename>/usr/local/lib/php/extensions</filename>).
 </simpara>
 <para>
  Troubleshooting: common problems from <command>./configure</command> or 
  <command>make</command>
  <itemizedlist>
   <listitem>
    <simpara>
     If you get a <literal>./configure: line 3027: `PHP_GTK_ARG_ENABLE(debug, 
     whether to include debugging symbols,'</literal> after doing the 
     <command>./configure</command>, you just have to do the following:
   </simpara>
   <programlisting role="shell">
<![CDATA[
./buildconf
aclocal
./buildconf
./configure
]]>
   </programlisting>
  </listitem>
   <listitem>
    <simpara>
     <literal>./ltconfig: ltconfig : No such file or directory, configure: 
     error: libtool configure failed</literal>  is caused by not having
     one of libtool, automake or autoconf installed.
   </simpara>
  </listitem>
  <listitem>
   <simpara>
    <literal>./aclocal.m4:813: error: m4_defn: undefined: 
    _m4_divert_diversion</literal>  is caused by an incompatible version
    of autoconf, see the recommended  versions above.
   </simpara>
  </listitem>
  <listitem>
   <para>
    <literal>php_gtk+.c:33: parse error before `TSRMLS_DC'</literal>  is
    caused by either an old version of php being found by the build system
    or trying to build php-gtk with an old version of PHP - please upgrade
    to PHP version &version.php; to fix this.
   </para>
  </listitem>
  <listitem>
   <simpara>
    <literal>gen_gtk.c:1: parse error before '&lt;'</literal>  is caused by
    an error occurring in the generator.  Usually this error is resolved by
    adding the line 
    <literal>ini_set("memory_limit", "32M");</literal> 
    to the first line of <filename>generator/generator.php</filename>.  You
    will need to remove all the <filename>gen_*</filename> files from all
    directories after changing this.
   </simpara>
  </listitem>
  <listitem>
   <simpara>
    <literal>checking for gnome-config... Unknown library `gtkhtml'</literal>
    (from <command>./configure</command>)  is due to an old or unavailable
    development header file - if you installed by rpm or a similar package
    system you will need the <literal>-devel</literal> packages
   </simpara>
  </listitem>
  <listitem>
   <simpara>
    <literal>Unable to find -lgal</literal>  or similar message is caused
    by a missing <literal>gal-devel</literal> or similar library.  Usually
    this will be a sub dependancy of some of the more complex widgets, like
    gtkhtml.
   </simpara>
  </listitem>
 </itemizedlist>
 </para>
 <simpara>
  To test the extension, try running the example scripts in the 
  <filename>test/</filename> directory.  These also provide demonstrations
  of some of the ways in which PHP-GTK and its extensions can be used.
 </simpara>
</chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->