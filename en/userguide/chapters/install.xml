<?xml version="1.0" encoding="ISO-8859-1" ?>
<chapter id="installation">
 <title>Installation</title>
 <sect1 id="install.get">
  <title>Getting The Latest Version</title>
  <para>
   PHP-GTK &version.phpgtk; source and the binaries for Windows can be found
   at <ulink url="&url.phpgtk;">&url.phpgtk;</ulink>.  Source users will
   also need to install the latest version of PHP from CVS 
   <ulink url="&url.php.anoncvs;">&url.php.anoncvs;</ulink>.
  </para>
 </sect1>

 <sect1 id="install.win32">
  <title>Installing PHP-GTK Under Windows</title>

  <sect2 id="install.win32.binaries">
   <title>Downloading PHP-GTK</title>
   <para>
    Download PHP-GTK &version.phpgtk; win32 binaries from 
    <ulink url="&url.phpgtk;">&url.phpgtk;</ulink>.  You may also want to
    check out the latest sources from php.net's CVS server.  See 
    <ulink url="&url.php.anoncvs;">&url.php.anoncvs;</ulink> for more
    information.
   </para>
  </sect2>
  <sect2 id="install.win32.binary.package-layout">
   <title>Layout of the Binary Distribution</title>
   <para>
    The binary distribution of PHP-GTK contains this structure:
    <itemizedlist>
     <listitem>
      <para>
       <filename>\php4</filename> -&gt; PHP &version.php; and PHP-GTK 
       &version.phpgtk; binary files
      </para>
     </listitem>
     <listitem>
      <simpara>
       <filename>\winnt</filename> -&gt; the default php.ini file
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       <filename>\winnt\system32</filename> -&gt; GTK+ binaries used by the
       extension
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       <filename>\test</filename> -&gt; a few samples to demonstrate
       PHP-GTK usage
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       <filename>README.TXT</filename>
      </simpara>
     </listitem>
    </itemizedlist>
   </para>
  </sect2>
  <sect2 id="install.win32.howto">
   <title>How to install</title>
   <orderedlist>
    <listitem>
     <simpara>
      Copy <filename>\php4</filename> to your existing php directory.  If
      this is a new installation you should create 
      <filename>c:\php4</filename> and copy the files to this directory.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Copy <filename>\winnt</filename> to your windows directory.  On
      Windows NT and Windows 2000 that is <filename>c:\winnt</filename>. 
      On Windows 95/98 that is <filename>c:\windows</filename>.  If you
      have an existing <filename>php.ini</filename> you don't need to copy
      this file.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Copy <filename>\winnt\system32</filename> to your windows system32
      directory.  On Windows NT and Windows 2000 that is 
      <filename>c:\winnt\system32</filename>.  On Windows 95/98 that is 
      <filename>c:\windows\system32</filename>.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Copy <filename>\test</filename> to the location where you want to run
      your scripts (e.g. <filename>c:\php4\test</filename>).
     </simpara>
    </listitem>
   </orderedlist>
  </sect2>
  <sect2 id="install.win32.usage">
   <title>How to use PHP-GTK</title>
   <simpara>
    PHP-GTK applications can be started from the command line (or a batch
    file) with this syntax: 
    <command>c:\php4\php -q c:\path\to\php-gtk\script.php</command>
   </simpara>
  </sect2>
 </sect1>

 <sect1 id="install.unix">
  <title>Installing PHP-GTK Under Unix</title>
  <para>
   PHP GTK depends on a number of packages, which must be installed before 
   starting the PHP-GTK installation:
   <itemizedlist>
    <listitem>
     <para>
      PHP version &version.php; or later
     </para>
    </listitem>
    <listitem>
     <para>
      <ulink url="&url.gtk.download;">GTK libraries</ulink> or you can use
      the packaged versions for your system e.g. <literal>gtk</literal> and 
      <literal>gtk-devel</literal>
     </para>
    </listitem>
    <listitem>
     <simpara>
      libtool, automake and autoconf.  The combination of libtool 1.4.2, 
      automake 1.4 and autoconf 2.13 is known to work; mileage may vary
      with other version combinations.
     </simpara>
    </listitem>
    <listitem>
     <para>
      For the optional extras, download 
      <ulink url="&url.gtkhtml;">GtkHTML libraries</ulink>,
      <ulink url="&url.scintilla;">GtkScintilla libraries</ulink> and
      <ulink url="&url.pixbuf;">Gdk-Pixbuf libraries</ulink>.  Again, these
      may be available packaged on your system, just ensure that you also
      install the development package.  GtkHTML, notably, has a number of
      sub-dependencies, e.g. <literal>GAL</literal>, which can also be
      obtained from the <ulink url="&url.gnome.ftp;">Gnome ftp site</ulink>.
     </para>
    </listitem>
   </itemizedlist>
  </para>
  <para>
   We suggest you get the latest source from 
   <ulink url="&url.phpgtk;">&url.phpgtk;</ulink> or from anonymous CVS 
   <ulink url="&url.php.anoncvs;">&url.php.anoncvs;</ulink>.
  </para>
  <para>
   Run the <command>./buildconf</command> script that is inside the 
   distribution.  This will set up the necessary files and create the
   <literal>configure</literal> script.  Next, run 
   <command>./configure</command>.  This will check that you have a correct
   version of GTK+ 1.2.x (1.2.6 or above, available from 
   <ulink url="&url.gtk.download;">&url.gtk.download;</ulink>) and other files
   required for compilation, and will then create the needed Makefiles.
  </para>
  <simpara>
   <command>./configure</command> can also be used to build the extra 
   widgets, e.g.
   <command>./configure --enable-scintilla --enable-gtkhtml</command>.  To
   list all the available options use <command>./configure --help</command> 
   - and remember that each extra widget may have a number of dependencies
   that need to be available for the build to be successful.
  </simpara>
  <simpara>
   Finally, run <command>make</command> to compile the extension.  Some
   source files are generated from .defs files by the code generator.  If
   you see messages like &quot;Could not write...&quot;, it means that the
   listed GTK+ objects or features are not yet supported.  If the
   compilation is successful, run <command>make install</command> to install
   the extension into your default PHP extension directory (usually 
   <filename>/usr/local/lib/php/extensions</filename>).
  </simpara>
  <para>
   Common problems from <command>./configure</command> or 
   <command>make</command>
   <itemizedlist>
    <listitem>
     <simpara>
      <literal>./ltconfig: ltconfig : No such file or directory, configure: 
      error: libtool configure failed</literal> is caused by not having
      one of libtool, automake or autoconf installed.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>./aclocal.m4:813: error: m4_defn: undefined: 
     _m4_divert_diversion</literal> is caused by an incompatible version
     of autoconf, see the recommended  versions above.
    </simpara>
   </listitem>
   <listitem>
    <para>
     <literal>php_gtk+.c:33: parse error before `TSRMLS_DC'</literal> is
     caused by either an old version of php being found by the build system
     or trying to build php-gtk with an old version of PHP - please upgrade
     to PHP version &version.php; to fix this.
    </para>
   </listitem>
   <listitem>
    <simpara>
     <literal>gen_gtk.c:1: parse error before '&lt;'</literal> is caused by
     an error occurring in the generator.  Usually this error is resolved by
     adding the line 
     <literal>ini_set(&quot;memory_limit&quot;, &quot;32M&quot;);</literal> 
     to the first line of <filename>generator/generator.php</filename>.  You
     will need to remove all the <filename>gen_*</filename> files from all
     directories after changing this.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>checking for gnome-config... Unknown library `gtkhtml'</literal>
     (from <command>./configure</command>) is due to an old or unavailable
     development header file - if you installed by rpm or a similar package
     system you will need the <literal>-devel</literal> packages
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>Unable to find -lgal</literal> or similar message is caused
     by a missing <literal>gal-devel</literal> or similar library.  Usually
     this will be a sub dependancy of some of the more complex widgets, like
     gtkhtml.
    </simpara>
   </listitem>
  </itemizedlist>
  </para>
  <simpara>
   To test the extension, try running the example scripts in the 
   <filename>test/</filename> directory.  These also provide demonstrations
   of some of the ways in which PHP-GTK and its extensions can be used.
  </simpara>
 </sect1>
</chapter>
