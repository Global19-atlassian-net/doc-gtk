<?xml version="1.0" encoding="ISO-8859-1" ?>
<chapter id="installation">
 <title>Instala&ccedil;&atilde;o</title>
 <sect1 id="install.get">
  <title>Obtendo a última versão</title>
  <!-- TODO  Make sure to keep the next paragraph updated - sf -->
  <simpara>
   Os fontes e bin&aacute;rios para Windows podem ser encontrados
   em <ulink url="&url.phpgtk;">&url.phpgtk;</ulink>. Usu&aacute;rios
   do fonte precisam instalar a &uacute;ltima vers&atilde;o do PHP no CVS - veja
   <ulink url="&url.php.anoncvs;">&url.php.anoncvs;</ulink>.
  </simpara>
 </sect1>

 <sect1 id="install.win32">
  <title>Instalando o PHP-GTK no Windows</title>

  <sect2 id="install.win32.binaries">
   <title>O download do PHP-GTK</title>
   <simpara>
    Baixe os bin&aacute;rios do PHP-GTK &version.phpgtk; de
    <ulink url="&url.phpgtk;">&url.phpgtk;</ulink>. Voc&ecirc;
	talvez queira baixar os &uacute;ltimos fontes do servidor
	CVS. Veja <ulink url="&url.php.anoncvs;">&url.php.anoncvs;</ulink>
	para mais informa&ccedil;&otilde;es.
   </simpara>
  </sect2>
  <sect2 id="install.win32.binary.package-layout">
   <title>Layout da Distribui&ccedil;&atilde;o dos Bin&aacute;rios</title>
   <para>
    A distribui&ccedil;&atilde;o dos bin&aacute;rios do PHP-GTK cont&eacute;m a seguinte estrutura:
    <itemizedlist>
     <listitem>
      <simpara>
       \php4   -&gt; PHP e arquivos bin&aacute;rios do PHP-GTK
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       \winnt  -&gt; arquivo default do php.ini
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       \winnt\system32 -&gt; bin&aacute;rios GTK+ usados pela extens&atilde;o
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       \test -&gt; v&aacute;rios exemplos para demonstrar o uso do PHP-GTK.
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       README.TXT
      </simpara>
     </listitem>
    </itemizedlist>
   </para>
  </sect2>
  <sect2 id="install.win32.howto">
   <title>Como instalar</title>
   <orderedlist>
    <listitem>
     <simpara>
	  Copie <filename>\php4</filename> para seu diret&oacute;rio existente. Se esta &eacute; uma nova
	  instala&ccedil;&atilde;o voc&ecirc; deve criar <filename>c:\php4</filename> e copiar os arquivos 
	  para este diret&oacute;rio.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
	  Copie <filename>\winnt</filename> para seu diret&oacute;rio do windows. No
	  Windows NT, Windows 2000 e XP geralmente <filename>c:\winnt</filename>.
	  No Windows 95/98/ME geralmente <filename>c:\windows</filename>. Se voc&ecirc;
	  j&aacute; possui um arquivo <filename>php.ini</filename> existente voc&ecirc; 
	  n&atilde;o precisa copiar este arquivo.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
	  Copie <filename>\winnt\system32</filename> para seu diret&oacute;rio do sistema. No
	  Windows NT, Windows 2000 e XP geralmente <filename>c:\winnt\system32</filename>.
	  No Windows 95/98/ME geralmente <filename>c:\windows\system32</filename>.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
	  Copie <filename>\test</filename> para o local onde voc&ecirc; quer rodar seus
	  scripts (ex: <filename>c:\php4\test</filename>).
     </simpara>
    </listitem>
   </orderedlist>
  </sect2>
  <sect2 id="install.win32.usage">
   <title>Como usar o PHP-GTK</title>
   <simpara>
    Aplicações PHP-GTK podem ser inicializadas à partir da linha de comando
	(ou atalho) com a sintaxe: <br/>
    <command>cd c:\php4\<br/>
	php_win.exe -q c:\caminho\para\php-gtk\script.php</command>
   </simpara>
  </sect2>
 </sect1>

 <sect1 id="install.unix">
  <title>Instalando o PHP-GTK no Unix</title>
  <!-- TODO  Make sure to keep the next paragraph updated - sf -->
  <para>
   Usu&aacute;rios do Debian podem fazer download do bin&aacute;rio do
   PHP-GTK em <ulink url="&url.debian;">&url.debian;</ulink>.
  </para>
  <para>
   PHP-GTK depende de uma s&eacute;rie de pacotes, que precisam ser instalados antes
   de iniciar a instala&ccedil;&atilde;o do PHP-GTK:
   <itemizedlist>
    <listitem>
     <para>
      PHP vers&atilde;o &version.php; ou superior
     </para>
    </listitem>
    <listitem>
     <para>
	  As GTK+ libraries, dispon&iacute;veis em
      <ulink url="&url.gtk.download;">&url.gtk.download;</ulink>, ou voc&ecirc; pode
	  usar as vers&otilde;es dos pacotes para o seu sistema, e.g. <literal>gtk</literal>
	  e <literal>gtk-devel</literal>
     </para>
    </listitem>
    <listitem>
     <simpara>
	  libtool, automake e autoconf. A combina&ccedil;&atilde;o da libtool 1.4.2,
	  automake 1.4 e autoconf 2.13 s&atilde;o as melhores para se trabalhar;
	  isto pode variar dependendo das vers&otilde;es e combina&ccedil;&otilde;es.
     </simpara>
    </listitem>
    <listitem>
     <para>
	  Para op&ccedil;&otilde;es extras, baixe
      <ulink url="&url.gtkhtml;">GtkHTML libraries</ulink>,
      <ulink url="&url.scintilla;">GtkScintilla libraries</ulink> e
      <ulink url="&url.pixbuf;">Gdk-Pixbuf libraries</ulink>.  Novamente, voc&ecirc;
	  pode pegar os pacotes dispon&iacute;veis para o seu sistema, s&oacute; tenha certeza
	  que voc&ecirc; instalou o pacote de desenvolvedor. GtkHTML, notavelmente, tem
	  um grande n&uacute;mero de sub-depend&ecirc;ncias, e.g. <literal>GAL</literal>, que voc&ecirc;
	  pode obter em <ulink url="&url.gnome.ftp;">Gnome ftp site</ulink>.
     </para>
    </listitem>
   </itemizedlist>
  </para>
  <para>
   N&oacute;s sugerimoes que voc&ecirc; obtenha o &uacute;ltimo fonte em
   <ulink url="&url.phpgtk;">&url.phpgtk;</ulink> ou
   anonimamente via CVS <ulink url="&url.php.anoncvs;">&url.php.anoncvs;</ulink>.
  </para>
  <para>
   Rode o script <command>./buildconf</command> que est&aacute; dentro da sua
   distribui&ccedil;&atilde;o. Isto ir&aacute; preparar os arquivos e criar o 
   script <literal>configure</literal>. Ap&oacute;s isto, rode 
   <command>./configure</command>. Este script ir&aacute; checar se voc&ecirc; 
   tem a vers&atilde;o correta do GTK+ 1.2.x (1.2.6 ou superior, dispon&iacute;vel 
   em <ulink url="&url.gtk.download;">&url.gtk.download;</ulink>) e outros arquivos
   requeridos para a compila&ccedil;&atilde;o, e ir&aacute; criar os arquivos 
   Makefiles necess&aacute;rios.
  </para>
  <simpara>
   <command>./configure</command> tamb&eacute;m pode ser usado para criar
   widgets extras, e.g. <command>./configure --enable-scintilla --enable-gtkhtml</command>.
   Para listar todas as op&ccedil;&otilde;es dispon&iacute;veis use <command>./configure --help</command>.
   Lembre-se que cada widget extra pode precisar de depend&ecirc;ncias extras que voc&ecirc; precisar&aacute;
   ter para ter uma configura&ccedil;&atilde;o bem sucedida.
  </simpara>
  <simpara>
   Finalmente, rode <command>make</command> para compilar a extens&atilde;o. Alguns
   fontes s&atilde;o gerados dos arquivos .defs pelo c&oacute;digo gerador. Se voc&ecirc; ver
   algumas mensagens como <literal>&quot;Could not write...&quot;</literal>,
   isto significa que os objetos listado GTK+ ou as caracter&iacute;sticas ainda n&atilde;o s&atilde;o suportadas.
   Se a compila&ccedil;&atilde;o for bem sucedida, rode <command>make install</command> para
   instalar a extens&atilde;o dentro do diret&oacute;rio padr&atilde;o da extens&atilde;o PHP (geralmente
   <filename>/usr/local/lib/php/extensions</filename>).
  </simpara>
  <para>
   Erros: erros mais comuns em <command>./configure</command> or 
   <command>make</command>
   <itemizedlist>
    <listitem>
     <simpara>
      <literal>./ltconfig: ltconfig : No such file or directory, configure: 
      error: libtool configure failed</literal>  &eacute; causado quando n&atilde;o se tem
	  um dos componentes da libtool, automake ou autoconf instalado.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>./aclocal.m4:813: error: m4_defn: undefined: 
     _m4_divert_diversion</literal>  &eacute; causado por incompatibilidade de vers&otilde;es
	 do autoconf, veja a recomenda&ccedil;&atilde;o das vers&otilde;es acima
    </simpara>
   </listitem>
   <listitem>
    <para>
     <literal>php_gtk+.c:33: parse error before `TSRMLS_DC'</literal>  &eacute; 
	 causada quando encontra uma vers&atilde;o aniga do PHP ou quando tenta-se 
	 configurar o php-gtk com uma vers&atilde;o antiga do PHP - por favor atualize
	 a sua vers&atilde;o do PHP para &version.php; para fixar este problema
    </para>
   </listitem>
   <listitem>
    <simpara>
     <literal>gen_gtk.c:1: parse error before '&lt;'</literal>  &eacute; causado por um
	 erro que do gerador de c&oacute;digo. Geralmente este erro se resolve adicionando a linha
	 <literal>ini_set(&quot;memory_limit&quot;, &quot;32M&quot;);</literal> 
     na primeira linha do arquivo <filename>generator/generator.php</filename>. Voc&ecirc;
	 precisar&aacute; remover todos os arquivos <filename>gen_*</filename> de todos os diret&oacute;rios
	 após fazer isto
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>checking for gnome-config... Unknown library `gtkhtml'</literal>
     (from <command>./configure</command>)  &eacute; devido ao uso de um velho ou n&atilde;o 
	 disponivel arquivo de cabe&ccedil;alho de desenvolvimento - se voc&ecirc; instalou via
	 rpm ou pacotes similares do seu sistema voc&ecirc; precisar&aacute; dos pacotes <literal>-devel</literal>
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <literal>Unable to find -lgal</literal>  ou uma mensagem similar é causada
	 pela falta da biblioteca <literal>gal-devel</literal> ou similar. Geralmente
	 esta dependência precisará de uma sub depedência ou alguns widgets mais complexos,
	 como o gtkhtml.
    </simpara>
   </listitem>
  </itemizedlist>
  </para>
  <simpara>
   Para testar a extensão, tente rodar um exemplo dos scripts no
   diretório <filename>\test</filename>. Estes scripts também demonstram
   alguns modos nos quais o PHP-GTK e suas extensões podem ser usadas.
  </simpara>
 </sect1>
</chapter>
