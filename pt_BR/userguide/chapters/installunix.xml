<?xml version="1.0" encoding="ISO-8859-1" ?>
<chapter id="installunix">
 <title>Instalando o PHP-GTK no Unix</title>
 <para>
  Usuários do Debian podem fazer download do binário do PHP-GTK em 
  <ulink url="&url.debian;">&url.debian;</ulink>.
 </para>
 <para>
  O PHP-GTK depende do número de pacotes, que precisam ser instalados antes 
  de começar a instalação do PHP-GTK:
  <itemizedlist>
   <listitem>
    <para>
	 PHP versão &version.php; ou maior
    </para>
   </listitem>
   <listitem>
    <para>
	 As bibliotecas GTK+, disponíveis em <ulink url="&url.gtk.download;">&url.gtk.download;</ulink>, 
	 ou você pode usar a versão que vem nos pacotes do seu sistema, ex: <literal>gtk</literal> 
	 e <literal>gtk-devel</literal>.
    </para>
   </listitem>
   <listitem>
    <simpara>
	 libtool, automake e autoconf. A combinação da libtool 1.4.2, do automake 1.4 e do 
	 autoconf 2.13 são as melhores para se trabalhar; isto pode variar dependendo das 
	 versões e combinações que forem feitas.
    </simpara>
   </listitem>
   <listitem>
    <para>
	 Para opções extras, baixe as
     <ulink url="&url.gtkhtml;">bibliotecas GtkHTML</ulink>, as 
     <ulink url="&url.scintilla;">bibliotecas GtkScintilla</ulink> e 
     <ulink url="&url.pixbuf;">bibliotecas Gdk-Pixbuf</ulink>. Novamente, você 
	 pode pegar os pacotes disponíveis para seu sistema, só tenha certeza de que você 
	 instalou o pacote de desenvolvedor. A GtkHTML, tem um grande número de sub-depedências, ex: 
	 <literal>GAL</literal>, que pode ser obtida em <ulink url="&url.gnome.ftp;">Gnome ftp site</ulink>.
    </para>
   </listitem>
  </itemizedlist>
 </para>
 <para>
  Nós sugerimos que você baixe a última versão do fonte em 
  <ulink url="&url.phpgtk;">&url.phpgtk;</ulink> ou à partir do CVS (anonimamente) 
  <ulink url="&url.php.anoncvs;">&url.php.anoncvs;</ulink>.
 </para>
 <para>
  Rode o script <command>./buildconf</command> que está dentro da distribuição. 
  Ele irá configurar os arquivos necessários e criar o script <literal>configure</literal>. 
  Ele também irá verificar se você tem uma versão correta do GTK+ 1.2.x (1.2.6 ou superior, 
  disponível em <ulink url="&url.gtk.download;">&url.gtk.download;</ulink>) e outros arquivos 
  obrigatórios para a compilação, após isto, ele criará os arquivos Makefiles necessários.
 </para>
 <simpara>
  O comando command>./configure</command> pode também ser usado para 
  adicionar widgets adicionais, ex: <command>./configure --enable-scintilla --enable-gtkhtml</command>. 
  Para listar todas as opções disponíveis use: <command>./configure --help</command>. 
  Lembre-se que cada widget adicional pode ter um número de depedências necessárias 
  que você irá precisar para que o PHP-GTK compile com sucesso.
 </simpara>
 <simpara>
  Fincalmente, rode o comando <command>make</command> para compilar a extensão. 
  Alguns arquivos fontes são gerados à partir de arquivos .def pelo gerador de 
  código. Se você ver mensagens como <literal>"Could not write..."</literal>, 
  isto significa que os objetos ou característidas listadas no GTK+ não são 
  suportados ainda. Se a compilação for bem sucedida, rode o comando 
  <command>make install</command> para instalar a extensão em seu diretório 
  padrão de extensões do PHP (geralmente <filename>/usr/local/lib/php/extensions</filename>).
 </simpara>
 <para>
  Solução de problemas: problemas comuns com os comandos 
  <command>./configure</command> ou <command>make</command>
  <itemizedlist>
   <listitem>
    <simpara>
	 <literal>./ltconfig: ltconfig : No such file or directory, configure: 
     error: libtool configure failed</literal> ocorre quando não se tem um 
	 dos componentes da libtool, automake ou autoconf instalado.
   </simpara>
  </listitem>
  <listitem>
   <simpara>
    <literal>./aclocal.m4:813: error: m4_defn: undefined: 
    _m4_divert_diversion</literal> ocorre quando há incompatibilidade de versões 
	do autoconf, veja a recomendação das versões acima.
   </simpara>
  </listitem>
  <listitem>
   <para>
    <literal>php_gtk+.c:33: parse error before `TSRMLS_DC'</literal> ocorre quando uma versão 
	antiga do PHP é encontrada pelo sistema de geração ou quando se está tentando compilar o 
	php-gtk com uma versão antiga do PHP - por favor atualize a sua versão do PHP para &version.php; 
	para consertar este problema.
   </para>
  </listitem>
  <listitem>
   <simpara>
    <literal>gen_gtk.c:1: parse error before '&lt;'</literal> é causada por um erro no gerador de código. 
	Geralmente este problema é solucionado adicionando-se a linha <literal>ini_set("memory_limit", "32M");</literal> 
	na primeira linha do arquivo <filename>generator/generator.php</filename>. Você irá 
	precisar remover todos os arquivos <filename>gen_*</filename> de todos os diretórios após 
	fazer esta alteração.
   </simpara>
  </listitem>
  <listitem>
   <simpara>
    <literal>checking for gnome-config... Unknown library `gtkhtml'</literal>
    (from <command>./configure</command>) ocorre devido ao uso de um arquivo de 
	cabeçalho antigo ou não disponível - se você instalou o PHP-GTK usando via rpm ou 
	pacotes simalres do seu sistema você precisará dos pacotes <literal>-devel</literal>.
   </simpara>
  </listitem>
  <listitem>
   <simpara>
    <literal>Unable to find -lgal</literal> ou mensagens simalres à esta, são causadas 
	pela falta da biblioteca <literal>gal-devel</literal> ou alguma biblioteca simular à esta. 
	Geralmente ela é uma sub-dependência de alguns widgets mais complexos, como o <literal>gtkhtml</literal>.
   </simpara>
  </listitem>
 </itemizedlist>
 </para>
 <simpara>
  Para testar se a extensão foi instalada com sucesso, tente rodar um dos scripts de exemplo 
  do diretório <filename>test/</filename> directory. Estes scripts também demonstram alguns 
  modos nos quais o PHP-GTK e suas extensões podem ser usadas.
 </simpara>
</chapter>